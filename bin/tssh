#!/usr/bin/bash

# Get Mintty color schemes
shopt -s expand_aliases
source ~/.bash_mintty_colors

USERNAME=`whoami`
DATE=`/usr/bin/date +%Y-%m-%d`
LOGDIR="/home/$USERNAME/sshlogs"
MACHINE=`/usr/bin/hostname`
if [[ $1 == *"@"* ]]
then
 FULLHOST=`echo $1|/usr/bin/cut -d'@' -f 2`
 USERNAME=`echo $1|/usr/bin/cut -d'@' -f 1`
else
 FULLHOST=$1
fi

# Clip the hostname from the FQDN, DNS suffx-search will replace, if needed. 
HOST=`echo $FULLHOST|cut -d'.' -f1`


# Set the label to the hostname
LABEL="$HOST"

# Wrap tmux around lssh
/usr/bin/tmux new -n "$LABEL" -d lssh $USERNAME@$FULLHOST
/usr/bin/tmux attach

# Reset Mintty color scheme to default (grey on black)
default
